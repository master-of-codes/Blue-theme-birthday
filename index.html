<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Baby Boy's First Birthday | Happy Birthday Little Prince</title>
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="./manifest.json">
    
    <!-- iOS Icons -->
    <link rel="apple-touch-icon" href="./assets/logo.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Baby's First Birthday">
    
    <!-- Theme Color -->
    <meta name="theme-color" content="#0a0a0a">
    
    <!-- Icons for PWA -->
    <link rel="icon" href="./assets/logo.png" type="image/png">
    
    <!-- External Dependencies -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://unpkg.com/aos@2.3.1/dist/aos.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&family=Great+Vibes&family=Playfair+Display:wght@400;500;700&family=Cinzel:wght@400;700&family=Alex+Brush&family=Montserrat:wght@300;400;500&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Montserrat', sans-serif;
            background-color: #0a0a0a;
            color: #fff;
            overflow-x: hidden;
            touch-action: pan-y;
        }

        /* PWA Install Dialog */
        .pwa-dialog {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.85);
            z-index: 9999;
            justify-content: center;
            align-items: center;
        }

        .pwa-dialog-content {
            background: linear-gradient(135deg, rgba(20, 20, 20, 0.95), rgba(40, 40, 40, 0.95));
            border: 2px solid #00bfff;
            border-radius: 15px;
            padding: 30px;
            width: 90%;
            max-width: 400px;
            text-align: center;
            box-shadow: 0 15px 40px rgba(0, 191, 255, 0.3);
            animation: dialogAppear 0.5s ease-out;
        }

        @keyframes dialogAppear {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .pwa-dialog h3 {
            font-family: 'Cinzel', serif;
            color: #00bfff;
            margin-bottom: 15px;
            font-size: 1.8rem;
        }

        .pwa-dialog p {
            margin-bottom: 25px;
            line-height: 1.6;
            color: #fff;
        }

        .pwa-dialog-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }

        .pwa-dialog-btn {
            padding: 12px 25px;
            border: none;
            border-radius: 50px;
            font-family: 'Montserrat', sans-serif;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
            min-width: 100px;
        }

        .install-btn {
            background-color: #00bfff;
            color: #000;
        }

        .install-btn:hover {
            background-color: #87ceeb;
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 191, 255, 0.4);
        }

        .cancel-btn {
            background-color: transparent;
            color: #00bfff;
            border: 2px solid #00bfff;
        }

        .cancel-btn:hover {
            background-color: rgba(0, 191, 255, 0.1);
            transform: translateY(-3px);
        }

        /* Main container with background image */
        .main-container {
            width: 100%;
            position: relative;
            background-image: url('./assets/carousel-image5.png');
            background-attachment: fixed;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
        }

        /* Overlay to improve text readability */
        .content-overlay {
            background-color: rgba(0, 0, 0, 0.4);
            width: 100%;
            min-height: 100vh;
            position: relative;
            z-index: 5;
        }

        /* Audio container */
        .audio-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
        }

        .audio-control {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: rgba(0, 191, 255, 0.7);
            border: 1px solid #00bfff;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #00bfff;
            cursor: pointer;
            z-index: 1000;
            transition: all 0.3s ease;
            opacity: 0;
            transform: scale(0);
        }

        .audio-control:hover {
            transform: scale(1.1);
            box-shadow: 0 0 15px rgba(0, 191, 255, 0.6);
        }

        .audio-control i {
            font-size: 22px;
        }

        .audio-control.rotating i {
            animation: rotate 4s linear infinite;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(0, 191, 255, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(0, 191, 255, 0); }
            100% { box-shadow: 0 0 0 0 rgba(0, 191, 255, 0); }
        }

        /* Flower petals container - changed to baby theme */
        .petals-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 2;
            overflow: hidden;
        }


        /* Lantern animation container */
        .lantern-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            pointer-events: none;
            overflow: hidden;
        }

        .lantern {
            position: absolute;
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            opacity: 0;
            pointer-events: none;
            z-index: 1;
        }

        /* Confetti container - blue theme */
        .confetti-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 100;
            overflow: hidden;
            display: none;
        }

        .confetti {
            position: absolute;
            width: 10px;
            height: 20px;
            background-color: #00bfff;
            opacity: 0.9;
            bottom: 0;
            z-index: 100;
        }

        .confetti:nth-child(odd) {
            background-color: #4169e1;
        }

        .confetti:nth-child(even) {
            background-color: #87ceeb;
        }

        /* Section styling - Mobile optimized margins */
        section {
            position: relative;
            z-index: 10;
            padding: 40px 15px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            background-attachment: fixed;
        }



        .sky-background {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 300%;
            background-image: 
                url('./assets/sky.jpg'),
                url('./assets/sky.jpg'),
                url('./assets/sky.jpg');
            background-repeat: repeat-y;
            background-size: 100% auto;
            animation: skyScroll 30s linear infinite;
            z-index: 1;
        }

        @keyframes skyScroll {
            0% {
                transform: translateY(0);
            }
            100% {
                transform: translateY(-66.666%);
            }
        }

        /* Create the pattern: original -> inverted -> original */
        .sky-background::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 33.333%;
            background-image: url('./assets/sky.jpg');
            background-size: 100% auto;
            background-repeat: no-repeat;
            transform: scaleY(1);
        }

        .sky-background::after {
            content: '';
            position: absolute;
            top: 33.333%;
            left: 0;
            width: 100%;
            height: 33.333%;
            background-image: url('./assets/sky.jpg');
            background-size: 100% auto;
            background-repeat: no-repeat;
            transform: scaleY(-1);
        }

        .third-image {
            content: '';
            position: absolute;
            top: 66.666%;
            left: 0;
            width: 100%;
            height: 33.334%;
            background-image: url('./assets/sky.jpg');
            background-size: 100% auto;
            background-repeat: no-repeat;
            transform: scaleY(1);
        }

        .fairy-image {
            position: relative;
            z-index: 2;
            max-width: 300px;
            width: 70%;
            height: auto;
            margin: 0 auto;
            animation: fairyFloat 1200s ease-in-out infinite;
        }

        @keyframes fairyFloat {
            0%, 100% {
                transform: translateY(0) rotate(0deg);
            }
            50% {
                transform: translateY(-20px) rotate(5deg);
            }
        }

        /* Section specific background images - moved to media queries */
        .invitation-section {
            padding-top: 60px;
            overflow-y: hidden;
        }

        .invitation-section h1,
        .invitation-section .parents-names {
            color: #fff;
        }

        .route-section {
            min-height: 60vh;
        }

        .message-section {
        }

        .gallery-section {
        }

        .countdown-section {
            min-height: 70vh;
            padding: 30px 15px;
        }

        .footer-section {
            min-height: 40vh;
            padding: 15px 20px;
        }

        /* Typography - WHITE THEME */
        h1 {
            font-family: 'Great Vibes', cursive;
            font-size: 4rem;
            margin-bottom: 15px;
            color: #fff;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.5), 0 0 5px rgba(255, 255, 255, 0.3);
        }

        h2 {
            font-family: 'Cinzel', serif;
            font-size: 2.5rem;
            margin-bottom: 20px;
            color: #fff;
            position: relative;
            padding-bottom: 10px;
            text-shadow: 0 0 5px rgba(255, 255, 255, 0.2);
        }

        h2:after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 2px;
            background-color: #fff;
        }

        h3 {
            font-family: 'Playfair Display', serif;
            font-size: 1.8rem;
            margin-bottom: 10px;
            color: #fff;
            text-shadow: 0 0 5px rgba(255, 255, 255, 0.2);
        }

        h4 {
            font-family: 'Playfair Display', serif;
            font-size: 1.5rem;
            margin-bottom: 8px;
            color: #fff;
            text-shadow: 0 0 5px rgba(255, 255, 255, 0.2);
        }

        .parents-names {
            font-family: 'Alex Brush', cursive;
            font-size: 4rem;
            color: #fff;
            margin: 15px 0;
            line-height: 1.2;
            text-shadow: 0 0 15px rgba(255, 255, 255, 0.7), 0 0 10px rgba(255, 255, 255, 0.3);
        }

        .divider {
            width: 120px;
            height: 2px;
            background-color: #fff;
            margin: 20px auto;
            position: relative;
        }

        .divider:before, .divider:after {
            content: '';
            position: absolute;
            width: 8px;
            height: 8px;
            background-color: #fff;
            border-radius: 50%;
            top: 50%;
            transform: translateY(-50%);
        }

        .divider:before {
            left: -15px;
        }

        .divider:after {
            right: -15px;
        }

        p {
            font-size: 1rem;
            line-height: 1.6;
            max-width: 800px;
            margin: 0 auto 15px;
            text-shadow: 0 0 3px rgba(255, 255, 255, 0.1);
        }

        .invitation-text {
            font-family: 'Dancing Script', cursive;
            font-size: 1.5rem;
            max-width: 700px;
            margin: 20px auto;
            color: #fff;
            text-shadow: 0 0 5px rgba(255, 255, 255, 0.2);
        }

        /* Events section */
        .events-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 25px;
            margin-top: 30px;
            max-width: 1200px;
        }

        .event-card {
            width: 280px;
            position: relative;
        }

        .frame-container {
            position: relative;
            width: 100%;
            height: 380px;
            margin-bottom: 15px;
            border-radius: 5px;
            overflow: visible;
            z-index: 1;
        }

        .frame {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('./assets/frame.png');
            background-size: contain;
            background-position: center;
            background-repeat: no-repeat;
            z-index: 3;
            pointer-events: none;
        }

        .event-image {
            width: 65%;
            height: 69%;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            border-radius: 40%;
            z-index: 2;
        }

        .event-1 .event-image {
            background-image: url('./assets/event1.png');
        }

        .event-2 .event-image {
            background-image: url('./assets/event2.png');
        }

        .event-3 .event-image {
            background-image: url('./assets/event3.png');
        }

        .floral-overlay {
            position: absolute;
            width: 50px;
            height: 50px;
            background-size: contain;
            background-repeat: no-repeat;
            z-index: 2;
        }



        .event-details {
            margin-top: 10px;
        }

        .event-details p {
            margin: 5px 0;
            font-size: 0.9rem;
        }

        /* Route section */
        .route-btn {
            display: inline-flex;
            align-items: center;
            border: 2px solid #00bfff;
            color: #00bfff;
            padding: 12px 25px;
            font-size: 1rem;
            border-radius: 50px;
            margin-top: 20px;
            text-decoration: none;
            transition: all 0.3s ease;
            text-shadow: 0 0 3px rgba(255, 255, 255, 0.1);
        }

        .route-btn:hover {
            background-color: rgba(0, 191, 255, 0.2);
            transform: translateY(-3px);
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.3);
        }

        .route-btn i {
            margin-right: 8px;
            font-size: 1.2rem;
        }

        /* Gallery section */
        .carousel-container {
            width: 100%;
            max-width: 850px;
            margin: 25px auto;
            position: relative;
            overflow: hidden;
            border-radius: 8px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.6);
        }

        .carousel-slides {
            display: flex;
            transition: transform 0.5s ease-in-out;
        }

        .carousel-slide {
            min-width: 100%;
            height: 400px;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
        }

        .carousel-nav {
            position: absolute;
            bottom: 15px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            align-items: center;
        }

        .carousel-dots {
            display: flex;
            gap: 8px;
        }

        .carousel-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.5);
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .carousel-dot.active {
            background-color: #00bfff;
        }

        .carousel-arrow {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background-color: rgba(0, 0, 0, 0.5);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            font-size: 1.2rem;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: all 0.3s;
            z-index: 10;
        }

        .carousel-arrow:hover {
            background-color: rgba(0, 191, 255, 0.8);
        }

        .carousel-arrow-left {
            left: 15px;
        }

        .carousel-arrow-right {
            right: 15px;
        }

        /* 3D Carousel Section */
        .carousel3d-section {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background-image: linear-gradient(rgba(0, 0, 0, 0.85), rgba(0, 0, 0, 0.85)), url('./assets/carousel-image5.png');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            padding: 40px 15px;
            position: relative;
            overflow: hidden;
        }

        .carousel3d-section h2 {
            margin-bottom: 40px;
            z-index: 10;
        }

        #drag-container, #spin-container {
            position: relative;
            display: -webkit-box;
            display: -ms-flexbox;
            display: flex;
            margin: auto;
            -webkit-transform-style: preserve-3d;
            transform-style: preserve-3d;
            -webkit-transform: rotateX(-10deg);
            transform: rotateX(-10deg);
            z-index: 5;
        }

        #drag-container {
            width: 400px;
            height: 400px;
            touch-action: pan-y pinch-zoom;
        }

        #spin-container {
            width: 100%;
            height: 100%;
        }

        #drag-container img {
            -webkit-transform-style: preserve-3d;
            transform-style: preserve-3d;
            position: absolute;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            line-height: 200px;
            text-align: center;
            -webkit-box-shadow: 0 0 8px #fff;
            box-shadow: 0 0 8px #fff;
            -webkit-box-reflect: below 10px linear-gradient(transparent, transparent, #0005);
            border-radius: 10px;
            object-fit: cover;
        }

        #drag-container img:hover {
            -webkit-box-shadow: 0 0 15px #00bfff;
            box-shadow: 0 0 15px #00bfff;
            -webkit-box-reflect: below 10px linear-gradient(transparent, transparent, #0007);
        }

        #ground {
            width: 900px;
            height: 900px;
            position: absolute;
            top: 100%;
            left: 50%;
            -webkit-transform: translate(-50%,-50%) rotateX(90deg);
            transform: translate(-50%,-50%) rotateX(90deg);
            background: -webkit-radial-gradient(center center, farthest-side , rgba(0, 191, 255, 0.3), transparent);
            background: radial-gradient(center center, farthest-side , rgba(0, 191, 255, 0.3), transparent);
        }

        @-webkit-keyframes spin {
            from{
                -webkit-transform: rotateY(0deg);
                transform: rotateY(0deg);
            } 
            to{
                -webkit-transform: rotateY(360deg);
                transform: rotateY(360deg);
            }
        }

        @keyframes spin {
            from{
                -webkit-transform: rotateY(0deg);
                transform: rotateY(0deg);
            } 
            to{
                -webkit-transform: rotateY(360deg);
                transform: rotateY(360deg);
            }
        }

        @-webkit-keyframes spinRevert {
            from{
                -webkit-transform: rotateY(360deg);
                transform: rotateY(360deg);
            } 
            to{
                -webkit-transform: rotateY(0deg);
                transform: rotateY(0deg);
            }
        }

        @keyframes spinRevert {
            from{
                -webkit-transform: rotateY(360deg);
                transform: rotateY(360deg);
            } 
            to{
                -webkit-transform: rotateY(0deg);
                transform: rotateY(0deg);
            }
        }

        /* Countdown Section - Mobile optimized */
        .countdown-container {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 25px;
            flex-wrap: nowrap;
            width: 100%;
        }

        .countdown-box {
            background-color: rgba(0, 0, 0, 0.6);
            border: 2px solid #00bfff;
            border-radius: 8px;
            width: 80px;
            height: 80px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 10px;
            flex: 1 0 auto;
            max-width: 120px;
        }

        .countdown-value {
            font-family: 'Cinzel', serif;
            font-size: 2.2rem;
            color: #fff;
            line-height: 1;
            letter-spacing: 1px;
            text-shadow: 0 0 5px rgba(255, 255, 255, 0.2);
        }

        .countdown-label {
            font-size: 0.8rem;
            margin-top: 5px;
            color: #fff;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* Footer */
        .footer-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
        }

        .footer-links {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            margin: 20px 0;
        }

        .footer-link {
            color: #00bfff;
            text-decoration: none;
            font-size: 0.9rem;
            transition: color 0.3s;
            text-shadow: 0 0 3px rgba(255, 255, 255, 0.1);
        }

        .footer-link:hover {
            color: #fff;
            text-decoration: underline;
        }

        .social-icons {
            display: flex;
            gap: 15px;
            margin: 15px 0;
        }

        .social-icon {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            background-color: rgba(0, 191, 255, 0.2);
            display: flex;
            justify-content: center;
            align-items: center;
            color: #00bfff;
            font-size: 1rem;
            text-decoration: none;
            transition: all 0.3s;
        }

        .social-icon:hover {
            background-color: rgba(0, 191, 255, 0.8);
            color: #000;
            transform: translateY(-3px);
        }

        .copyright {
            margin-top: 20px;
            font-size: 0.8rem;
            color: rgba(255, 255, 255, 0.7);
            text-align: center;
        }

        /* Install logo in footer */
        .install-logo {
            cursor: pointer;
            transition: all 0.3s ease;
            border-radius: 50%;
            border: 2px solid transparent;
        }

        .install-logo:hover {
            transform: scale(1.1);
            border-color: #00bfff;
            box-shadow: 0 0 15px rgba(0, 191, 255, 0.5);
        }

        /* Responsive design */
        @media (min-width: 768px) {
            section {
                padding: 60px 20px;
            }

            h1 {
                font-size: 4.5rem;
            }

            h2 {
                font-size: 3rem;
            }

            .parents-names {
                font-size: 5.5rem;
            }

            .countdown-box {
                width: 120px;
                height: 120px;
            }

            .countdown-value {
                font-size: 3rem;
            }

            .carousel-slide {
                height: 450px;
            }

            .invitation-section {
                padding-top: 50px;
            }


            .fairy-image {
                max-width: 400px;
            }

            #drag-container {
                width: 500px;
                height: 500px;
                max-width: 100%;
            }
        }

        @media (min-width: 1024px) {
            section {
                padding: 80px 30px;
            }

            h1 {
                font-size: 5rem;
            }

            h2 {
                font-size: 3.5rem;
            }

            .parents-names {
                font-size: 6rem;
            }

            .countdown-box {
                width: 140px;
                height: 140px;
            }

            .countdown-value {
                font-size: 3.5rem;
            }

            .carousel-slide {
                height: 500px;
            }

            .invitation-section {
                padding-top: 50px;
            }

            .fairy-image {
                max-width: 500px;
            }

            #drag-container {
                width: 600px;
                height: 600px;
            }
        }

        @media (max-width: 767px) {
            .content-overlay {
                background-color: rgba(0, 0, 0, 0.4);
                width: 100%;
                min-height: 100vh;
                position: relative;
                z-index: 0;
            }

            .countdown-container {
                flex-wrap: nowrap;
                padding-bottom: 10px;
                justify-content: center;
                display: flex;
                align-items: center;
            }

            .countdown-box {
                flex: 0 0 auto;
                width: 60px;
                height: 60px;
                margin: 0 2px;
            }

            .countdown-value {
                font-size: 1.0rem;
            }

            .countdown-label {
                font-size: 0.4rem;
            }

            .events-container {
                flex-direction: column;
                align-items: center;
            }

            .event-card {
                width: 100%;
                max-width: 320px;
            }

            .audio-control {
                width: 40px;
                height: 40px;
            }

            .audio-control i {
                font-size: 18px;
            }

            .audio-container {
                bottom: 20px;
                right: 15px;
            }

            .invitation-section .ceremony-title {
                margin-top: 40%;
            }

            .frame-container {
                position: relative;
                width: 100%;
                height: 380px;
                margin-bottom: 15px;
                border-radius: 5px;
                overflow: visible;
                z-index: 1;
            }

            .frame {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background-image: url('./assets/frame.png');
                background-size: contain;
                background-position: center;
                background-repeat: no-repeat;
                z-index: 3;
                pointer-events: none;
            }

            .event-image {
                width: 66%;
                height: 68%;
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background-size: cover;
                background-position: center;
                background-repeat: no-repeat;
                border-radius: 40%;
                z-index: 2;
            }

            .fairy-image {
                max-width: 250px;
                width: 80%;
            }

            /* Mobile 3D Carousel - 60% size */
            #drag-container {
                width: 240px; /* 60% of 400px */
                height: 240px; /* 60% of 400px */
                transform: rotateX(-5deg) scale(0.6);
                transform-origin: center;
            }

            .carousel3d-section {
                min-height: 80vh;
                padding: 30px 10px;
            }

            .carousel3d-section h2 {
                font-size: 2rem;
                margin-bottom: 20px;
            }

            #ground {
                width: 540px; /* 60% of 900px */
                height: 540px; /* 60% of 900px */
            }
        }

        /* Desktop background images */
        @media (min-width: 768px) {
            .invitation-section {
                background-image: linear-gradient(rgba(0, 0, 0, 0.25), rgba(0, 0, 0, 0.25)), url('./assets/carousel-image5.png');
            }

            .events-section {
                background-image: linear-gradient(rgba(0, 0, 0, 0.21), rgba(0, 0, 0, 0.21)), url('./assets/img1.png');
            }

            .route-section {
                background-image: linear-gradient(rgba(0, 0, 0, 0.21), rgba(0, 0, 0, 0.21)), url('./assets/img4.png');
            }

            .message-section {
                background-image: linear-gradient(rgba(0, 0, 0, 0.21), rgba(0, 0, 0, 0.21)), url('./assets/event1.png');
            }

            .gallery-section {
                background-image: linear-gradient(rgba(0, 0, 0, 0.21), rgba(0, 0, 0, 0.21)), url('./assets/carousel-image5.png');
            }

            .carousel3d-section {
                background-image: linear-gradient(rgba(0, 0, 0, 0.21), rgba(0, 0, 0, 0.21)), url('./assets/img1.png');
            }

            .countdown-section {
                background-image: linear-gradient(rgba(0, 0, 0, 0.21), rgba(0, 0, 0, 0.21)), url('./assets/img1.png');
            }

            .footer-section {
                background-image: linear-gradient(rgba(0, 0, 0, 0.21), rgba(0, 0, 0, 0.21)), url('./assets/img1.png');
            }
        }

        /* Mobile background images */
        @media (max-width: 767px) {
            .content-overlay {
                background-color: rgba(0, 0, 0, 0.4);
                width: 100%;
                min-height: 100vh;
                position: relative;
                z-index: 0;
            }

            .invitation-section {
                background-image: linear-gradient(rgba(0, 0, 0, 0.21), rgba(0, 0, 0, 0.21)), url('./assets/carousel-image5.png');
            }

            .events-section {
                background-image: linear-gradient(rgba(0, 0, 0, 0.21), rgba(0, 0, 0, 0.21)), url('./assets/img1.png');
            }

            .route-section {
                background-image: linear-gradient(rgba(0, 0, 0, 0.21), rgba(0, 0, 0, 0.21)), url('./assets/img4.jpg');
            }

            .message-section {
                background-image: linear-gradient(rgba(0, 0, 0, 0.21), rgba(0, 0, 0, 0.21)), url('./assets/event1.png');
            }

            .gallery-section {
                background-image: linear-gradient(rgba(0, 0, 0, 0.21), rgba(0, 0, 0, 0.21)), url('./assets/event1.png');
            }

            .carousel3d-section {
                background-image: linear-gradient(rgba(0, 0, 0, 0.21), rgba(0, 0, 0, 0.21)), url('./assets/img1.png');
            }

            .countdown-section {
                background-image: linear-gradient(rgba(0, 0, 0, 0.21), rgba(0, 0, 0, 0.21)), url('./assets/img1.png');
            }

            .footer-section {
                background-image: linear-gradient(rgba(0, 0, 0, 0.21), rgba(0, 0, 0, 0.21)), url('./assets/img1.png');
                padding: 30px 15px 40% 15px;
            }
        }

        /* Hide scrollbar for countdown on mobile */
        .countdown-container::-webkit-scrollbar {
            display: none;
        }

        .countdown-container {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        /* Pram Animation */
        .pram {
            position: fixed;
            bottom: 0;
            left: -200px;
            width: 200px;
            height: 200px;
            z-index: 10000;
            pointer-events: none;
            overflow: visible;
        }

        .pram img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }
    </style>
</head>
<body>
    <!-- PWA Install Dialog -->
    <div class="pwa-dialog" id="pwaDialog">
        <div class="pwa-dialog-content">
            <h3>Install Baby's First Birthday App</h3>
            <p>Do you want to install the <strong>Baby's First Birthday</strong> app on your device?</p>
            <p>This will allow you to access the birthday invitation offline and get a better experience.</p>
            <div class="pwa-dialog-buttons">
                <button class="pwa-dialog-btn install-btn" id="installButton">Install</button>
                <button class="pwa-dialog-btn cancel-btn" id="cancelButton">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Audio player -->
    <div class="audio-container">
        <div class="audio-control" id="audioControl">
            <i class="fas fa-play-circle"></i>
        </div>
    </div>
    <audio id="babySong" src="./assets/pure-love-304010.mp3" preload="auto"></audio>

    <!-- Flower petals container -->
    <div class="petals-container" id="petalsContainer"></div>

    <!-- Lantern container for floating animation -->
    <div class="lantern-container" id="lanternContainer"></div>

    <!-- Confetti container -->
    <div class="confetti-container" id="confettiContainer"></div>

    <!-- Main content container -->
    <div class="main-container">
        <div class="content-overlay">
            <!-- Invitation Section -->
            <section class="invitation-section" id="invitation">
                <h1 data-aos="fade-down" data-aos-duration="1000" class="ceremony-title">Birthday Invitation</h1>
<!-- <h2 data-aos="fade-down">Precious Moments</h2> -->
<div id="drag-container" data-aos="zoom-in" data-aos-delay="300">
    <div id="spin-container">
        <!-- Images for the 3D carousel -->
        <img src="./assets/1m.png" alt="Baby moment 1">
        <img src="./assets/2m.png" alt="Baby moment 2">
        <img src="./assets/3m.png" alt="Baby moment 3">
        <img src="./assets/4m.png" alt="Baby moment 4">
        <img src="./assets/5m.png" alt="Baby moment 5">
        <img src="./assets/6m.png" alt="Baby moment 6">
        <img src="./assets/7m.png" alt="Baby preparation 1">
        <img src="./assets/8m.png" alt="Baby preparation 2">
        <img src="./assets/9m.png" alt="Baby preparation 3">
        <img src="./assets/10m.png" alt="Baby celebration">
        <img src="./assets/11m.png" alt="Baby joy">
        <img src="./assets/12m.png" alt="Baby love">
    </div>
    <div id="ground"></div>
</div>
<!-- <p style="margin-top: 20px; color: #87ceeb; font-size: 1rem;" data-aos="fade-up" data-aos-delay="500">
    Drag to rotate • Scroll to zoom • Click to view
</p> -->
                <p class="invitation-text" data-aos="fade-up" data-aos-delay="500">
                    With hearts full of joy and excitement, we invite you to celebrate our little prince's first magical birthday!
                </p>
                <div class="parents-names" data-aos="zoom-in" data-aos-delay="700">
                    Sarah<br>&<br>Michael
                </div>
                <p class="invitation-text" data-aos="fade-up" data-aos-delay="900">
                    proudly invite you to celebrate our son
                </p>
                <h2 data-aos="fade-up" data-aos-delay="1000" style="color: #00bfff;">Ethan's</h2>
                <h2 data-aos="fade-up" data-aos-delay="1100" style="color: #00bfff; margin-bottom: 30px;">First Birthday</h2>
                <p data-aos="fade-up" data-aos-delay="1200">Saturday, 15th June 2024</p>
                <p data-aos="fade-up" data-aos-delay="1300">3:00 PM onwards</p>
                <p data-aos="fade-up" data-aos-delay="1400">Garden Terrace, Grand Hotel, Chennai</p>
            </section>

            <!-- Events Section -->
            <section class="events-section" id="events" >
                <h2 data-aos="fade-down">Birthday Fun Activities</h2>
                <div class="events-container">
                    <!-- Event 1 -->
                    <div class="event-card event-1" data-aos="flip-left" data-aos-delay="200">
                        <div class="frame-container">
                            <div class="frame"></div>
                            <div class="event-image"></div>
                        </div>
                        <div class="event-details">
                            <h3>Welcome & Cake Smash</h3>
                            <p>Saturday, 15th June 2024</p>
                            <p>3:00 PM - 4:00 PM</p>
                            <p>Main Celebration Area</p>
                        </div>
                    </div>

                    <!-- Event 2 -->
                    <div class="event-card event-2" data-aos="flip-right" data-aos-delay="400">
                        <div class="frame-container">
                            <div class="frame"></div>
                            <div class="event-image"></div>
                        </div>
                        <div class="event-details">
                            <h3>Games & Balloon Fun</h3>
                            <p>Saturday, 15th June 2024</p>
                            <p>4:00 PM - 5:00 PM</p>
                            <p>Kids Play Zone</p>
                        </div>
                    </div>

                    <!-- Event 3 -->
                    <div class="event-card event-3" data-aos="flip-left" data-aos-delay="600">
                        <div class="frame-container">
                            <div class="frame"></div>
                            <div class="event-image"></div>
                        </div>
                        <div class="event-details">
                            <h3>Gift Opening & Photo Session</h3>
                            <p>Saturday, 15th June 2024</p>
                            <p>5:00 PM onwards</p>
                            <p>Photography Corner</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Gallery Section -->
            <section class="gallery-section" id="gallery">
                <h2 data-aos="fade-down">Ethan's First Year Journey</h2>
                <div class="carousel-container" data-aos="zoom-in" data-aos-delay="300">
                    <div class="carousel-slides">
                        <div class="carousel-slide" style="background-image: url('./assets/carousel-image1.png');"></div>
                        <div class="carousel-slide" style="background-image: url('./assets/carousel-image2.png');"></div>
                        <div class="carousel-slide" style="background-image: url('./assets/carousel-image3.png');"></div>
                        <div class="carousel-slide" style="background-image: url('./assets/carousel-image4.png');"></div>
                        <div class="carousel-slide" style="background-image: url('./assets/carousel-image5.png');"></div>
                    </div>
                    <button class="carousel-arrow carousel-arrow-left">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <button class="carousel-arrow carousel-arrow-right">
                        <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
            </section>



            <!-- Route Section -->
            <section class="route-section" id="route" >
                <h2 data-aos="fade-down">Celebration Venue</h2>
                <p data-aos="fade-up" data-aos-delay="200">Join us at the Grand Hotel Garden Terrace for Ethan's first birthday celebration</p>
                <a href="https://goo.gl/maps/example" target="_blank" data-aos="zoom-in" data-aos-delay="400">
                    <img src="./assets/map-icon.png" alt="map-icon" style="height: 30%; width: 30%;">
                </a>
                <p data-aos="fade-up" data-aos-delay="200">See the route on Google Maps</p>
            </section>

            <!-- Message Section -->
            <section class="message-section" id="message">
                <h2 data-aos="fade-down">Message from Ethan's Parents</h2>
                <p data-aos="fade-up" data-aos-delay="200">Dear Family and Friends,</p>
                <p data-aos="fade-up" data-aos-delay="300">It's hard to believe that one year has passed since our little Ethan came into our lives. What an incredible journey it has been! From his first smile to his first steps, every moment has been a precious memory we cherish.</p>
                <p data-aos="fade-up" data-aos-delay="400">We invite you to join us as we celebrate Ethan's first trip around the sun. Your presence will add to the joy of this special milestone as we watch our little boy take his first steps into toddlerhood.</p>
                <p data-aos="fade-up" data-aos-delay="500">Come ready to capture memories, share laughter, and celebrate the little boy who has brought so much light into our world.</p>
                <p data-aos="fade-up" data-aos-delay="600">With all our love,</p>
                <h3 data-aos="zoom-in" data-aos-delay="700">Sarah & Michael</h3>
            </section>



            <!-- Countdown Section -->
            <section class="countdown-section" id="countdown">
                <h2 data-aos="fade-down">Counting Down to Ethan's Big Day!</h2>
                <div class="countdown-container">
                    <div class="countdown-box" data-aos="flip-up" data-aos-delay="200">
                        <div class="countdown-value" id="days">00</div>
                        <div class="countdown-label">Days</div>
                    </div>
                    <div class="countdown-box" data-aos="flip-up" data-aos-delay="300">
                        <div class="countdown-value" id="hours">00</div>
                        <div class="countdown-label">Hours</div>
                    </div>
                    <div class="countdown-box" data-aos="flip-up" data-aos-delay="400">
                        <div class="countdown-value" id="minutes">00</div>
                        <div class="countdown-label">Minutes</div>
                    </div>
                    <div class="countdown-box" data-aos="flip-up" data-aos-delay="500">
                        <div class="countdown-value" id="seconds">00</div>
                        <div class="countdown-label">Seconds</div>
                    </div>
                </div>
            </section>

            <!-- Footer -->
            <section class="footer-section">
                <div class="footer-content">
                    <h3 data-aos="fade-down">Sarah, Michael & Baby Ethan</h3>
                    <div class="footer-links">
                        <a href="#invitation" class="footer-link" data-aos="fade-up" data-aos-delay="100">Invitation</a>
                        <a href="#events" class="footer-link" data-aos="fade-up" data-aos-delay="200">Activities</a>
                        <a href="#gallery" class="footer-link" data-aos="fade-up" data-aos-delay="300">Gallery</a>
                        <a href="#carousel3d" class="footer-link" data-aos="fade-up" data-aos-delay="400">3D Gallery</a>
                        <a href="#message" class="footer-link" data-aos="fade-up" data-aos-delay="500">Message</a>
                    </div>
                    <div class="social-icons">
                        <a href="#" class="social-icon" data-aos="zoom-in" data-aos-delay="100"><i class="fab fa-instagram"></i></a>
                        <a href="#" class="social-icon" data-aos="zoom-in" data-aos-delay="200"><i class="fas fa-facebook-f"></i></a>
                        <a href="#" class="social-icon" data-aos="zoom-in" data-aos-delay="300"><i class="fas fa-envelope"></i></a>
                    </div>
                    <div class="copyright" data-aos="fade-down" data-aos-delay="400" style="display: flex; align-items: center; flex-direction: column;">
                        <p data-aos="fade-down" data-aos-delay="400">© 2024 Ethan's First Birthday Celebration. All rights reserved.</p>
                        <p>Designed with love for our little prince</p>
                        <p class="footer-text" style="font-size: 1rem; margin-top: 30px; display: flex; align-items: center; flex-direction: row; justify-content: center;">
                            <img src="./assets/logo.png" style="border-radius: 50%; height: 10%; width: 10%; display: inline; margin: auto 15px;" class="install-logo" id="installLogo" title="Double-click to install app"/>
                            Developed By Brahma Web Invitations.
                        </p>
                    </div>
                </div>
            </section>
        </div>
    </div>

    <!-- Pram Animation Container -->
    <div class="pram" id="pram">
        <img id="pramImage" src="./assets/train-right.png" alt="Pram">
    </div>

    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        // Initialize AOS (Animate on Scroll)
        AOS.init({
            duration: 1000,
            once: false,
            offset: 100,
            delay: 100
        });

        // Audio functionality
        document.addEventListener('DOMContentLoaded', function() {
            const audio = document.getElementById('babySong');
            const audioControl = document.getElementById('audioControl');
            let isPlaying = false;

            // Show audio icon after a delay with animation
            setTimeout(() => {
                audioControl.style.opacity = '1';
                audioControl.style.transform = 'scale(1)';
            }, 6000);

            // Toggle audio play/pause on icon click
            audioControl.addEventListener('click', function() {
                if (isPlaying) {
                    audio.pause();
                    audioControl.innerHTML = '<i class="fas fa-play-circle"></i>';
                    audioControl.style.animation = 'pulse 2s infinite';
                } else {
                    audio.load(); // Ensure audio is loaded
                    audio.play().then(() => {
                        audioControl.innerHTML = '<i class="fas fa-pause-circle"></i>';
                        audioControl.style.animation = 'none';
                    }).catch(e => {
                        console.log("Audio play failed:", e);
                        // Reset to play icon if failed
                        audioControl.innerHTML = '<i class="fas fa-play-circle"></i>';
                    });
                }
                isPlaying = !isPlaying;
            });

            // Loop audio 50 times
            let playCount = 0;
            audio.addEventListener('ended', function() {
                playCount++;
                if (playCount < 50) {
                    audio.currentTime = 0;
                    audio.play();
                } else {
                    audioControl.style.display = 'none';
                }
            });

            // Flower petals animation
            const petalsContainer = document.getElementById('petalsContainer');
            let petalCount = 0;
            const maxPetals = 8;
            
            function createPetal() {
                if (petalCount >= maxPetals) return;
                
                petalCount++;
                const petal = document.createElement('div');
                petal.className = 'petal';
                
                // Random properties for each petal
                const size = Math.random() * 20 + 15; // 15px to 35px
                const startX = Math.random() * 100; // 0% to 100%
                const rotation = Math.random() * 360; // 0 to 360 degrees
                const duration = Math.random() * 10 + 15; // 15 to 25 seconds
                const delay = Math.random() * 5; // 0 to 5 seconds delay
                const opacity = Math.random() * 0.5 + 0.3; // 0.3 to 0.8
                
                // Set petal styles
                petal.style.width = `${size}px`;
                petal.style.height = `${size}px`;
                petal.style.left = `${startX}%`;
                petal.style.transform = `rotate(${rotation}deg)`;
                petal.style.opacity = opacity;
                petal.style.filter = 'brightness(1.5)';
                
                petalsContainer.appendChild(petal);
                
                // Animate petal falling
                setTimeout(() => {
                    petal.style.transition = `all ${duration}s linear`;
                    petal.style.top = `100vh`;
                    petal.style.left = `${startX + (Math.random() * 30 - 15)}%`;
                    petal.style.transform = `rotate(${rotation + 1080}deg)`;
                    
                    // Remove petal after animation and create new one
                    setTimeout(() => {
                        petal.remove();
                        petalCount--;
                        createPetal();
                    }, duration * 1000);
                }, delay * 1000);
            }
            
            // Start with 5 petals
            for (let i = 0; i < 5; i++) {
                setTimeout(createPetal, i * 1000);
            }
            
            // Lantern animation
            const lanternContainer = document.getElementById('lanternContainer');
            const lanternCount = 15;
            
            // Create lanterns
            for (let i = 0; i < lanternCount; i++) {
                const lantern = document.createElement('div');
                lantern.className = 'lantern';
                
                // Random properties for each lantern
                const size = Math.random() * 80 + 40; // 40px to 120px
                const startX = Math.random() * 100; // 0% to 100%
                const endX = Math.random() * 80 + 10; // 10% to 90%
                const rotation = Math.random() * 360; // 0 to 360 degrees
                const opacity = Math.random() * 0.7 + 0.3; // 0.3 to 1
                const duration = Math.random() * 3 + 4; // 4 to 7 seconds
                const delay = Math.random() * 2; // 0 to 2 seconds delay
                const parallaxSpeed = Math.random() * 0.5 + 0.1; // 0.1 to 0.6
                
                // Set lantern styles
                lantern.style.width = `${size}px`;
                lantern.style.height = `${size}px`;
                lantern.style.left = `${startX}%`;
                lantern.style.transform = `rotate(${rotation}deg)`;
                lantern.style.opacity = opacity;
                
                // Store parallax speed as data attribute
                lantern.dataset.parallaxSpeed = parallaxSpeed;
                
                lanternContainer.appendChild(lantern);
                
                // Animate lantern flying up
                setTimeout(() => {
                    lantern.style.transition = `all ${duration}s ease-in-out`;
                    lantern.style.left = `${endX}%`;
                    lantern.style.top = `${Math.random() * 70 + 10}%`; // 10% to 80% from top
                    lantern.style.opacity = opacity;
                    
                    // Add gentle floating animation
                    setInterval(() => {
                        lantern.style.transform = `rotate(${rotation}deg) translateY(${Math.sin(Date.now()/1000) * 10}px)`;
                    }, 50);
                }, delay * 1000);
            }
            
            // Parallax effect on scroll
            window.addEventListener('scroll', function() {
                const scrollY = window.scrollY;
                const lanterns = document.querySelectorAll('.lantern');
                
                lanterns.forEach(lantern => {
                    const speed = parseFloat(lantern.dataset.parallaxSpeed);
                    const yPos = -(scrollY * speed);
                    lantern.style.transform = `translateY(${yPos}px) rotate(${Math.random() * 360}deg)`;
                });
            });
            
            // Carousel functionality
            const carouselSlides = document.querySelector('.carousel-slides');
            const carouselDots = document.querySelectorAll('.carousel-dot');
            const prevBtn = document.querySelector('.carousel-arrow-left');
            const nextBtn = document.querySelector('.carousel-arrow-right');
            let currentSlide = 0;
            const totalSlides = document.querySelectorAll('.carousel-slide').length;
            
            // Update carousel position
            function updateCarousel() {
                carouselSlides.style.transform = `translateX(-${currentSlide * 100}%)`;
                
                // Update dots
                carouselDots.forEach((dot, index) => {
                    if (index === currentSlide) {
                        dot.classList.add('active');
                    } else {
                        dot.classList.remove('active');
                    }
                });
            }
            
            // Next slide
            function nextSlide() {
                currentSlide = (currentSlide + 1) % totalSlides;
                updateCarousel();
            }
            
            // Previous slide
            function prevSlide() {
                currentSlide = (currentSlide - 1 + totalSlides) % totalSlides;
                updateCarousel();
            }
            
            // Event listeners for carousel
            nextBtn.addEventListener('click', nextSlide);
            prevBtn.addEventListener('click', prevSlide);
            
            // Dot click events
            carouselDots.forEach(dot => {
                dot.addEventListener('click', function() {
                    currentSlide = parseInt(this.dataset.slide);
                    updateCarousel();
                });
            });
            
            // Auto slide every 5 seconds
            setInterval(nextSlide, 5000);
            
            // Countdown timer with seconds - to birthday date (June 15, 2024)
            const birthdayDate = new Date(2024, 5, 15, 15, 0, 0).getTime();
            let countdownFinished = false;
            
            function updateCountdown() {
                const now = new Date().getTime();
                const timeLeft = birthdayDate - now;
                
                // If countdown finished
                if (timeLeft < 0 && !countdownFinished) {
                    countdownFinished = true;
                    // Trigger confetti animation 3 times
                    triggerConfetti();
                    setTimeout(triggerConfetti, 1500);
                    setTimeout(triggerConfetti, 3000);

                    // After 5 seconds, start petals animation
                    setTimeout(() => {
                        for (let i = 0; i < 5; i++) {
                            setTimeout(createPetal, i * 500);
                        }
                    }, 5000);
                }
                
                // Calculate days, hours, minutes, seconds
                const days = Math.floor(timeLeft / (1000 * 60 * 60 * 24));
                const hours = Math.floor((timeLeft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);
                
                // Update display - ensure no negative values
                document.getElementById('days').textContent = Math.max(0, days).toString().padStart(2, '0');
                document.getElementById('hours').textContent = Math.max(0, hours).toString().padStart(2, '0');
                document.getElementById('minutes').textContent = Math.max(0, minutes).toString().padStart(2, '0');
                document.getElementById('seconds').textContent = Math.max(0, seconds).toString().padStart(2, '0');
            }
            
            // Confetti animation function - blue theme
            function triggerConfetti() {
                const confettiContainer = document.getElementById('confettiContainer');
                confettiContainer.style.display = 'block';
                
                // Create confetti from left side
                for (let i = 0; i < 50; i++) {
                    createConfettiPiece(10, i * 20);
                }
                
                // Create confetti from right side
                for (let i = 0; i < 50; i++) {
                    createConfettiPiece(90, i * 20);
                }
                
                // Hide confetti after animation
                setTimeout(() => {
                    confettiContainer.style.display = 'none';
                    // Clear all confetti pieces
                    confettiContainer.innerHTML = '';
                }, 3000);
            }
            
            function createConfettiPiece(startX, delay) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    
                    // Random properties
                    const width = Math.random() * 10 + 5;
                    const height = Math.random() * 15 + 10;
                    const rotation = Math.random() * 360;
                    const xPos = startX + (Math.random() * 10 - 5);
                    
                    confetti.style.width = `${width}px`;
                    confetti.style.height = `${height}px`;
                    confetti.style.left = `${xPos}%`;
                    confetti.style.transform = `rotate(${rotation}deg)`;
                    
                    document.getElementById('confettiContainer').appendChild(confetti);
                    
                    // Animate confetti
                    const duration = Math.random() * 2 + 1;
                    const endX = xPos + (Math.random() * 40 - 20);
                    
                    confetti.style.transition = `all ${duration}s ease-out`;
                    setTimeout(() => {
                        confetti.style.bottom = '80vh';
                        confetti.style.left = `${endX}%`;
                        confetti.style.transform = `rotate(${rotation + 720}deg)`;
                        confetti.style.opacity = '0';
                    }, 10);
                    
                    // Remove after animation
                    setTimeout(() => {
                        if (confetti.parentNode) {
                            confetti.remove();
                        }
                    }, duration * 1000 + 1000);
                }, delay);
            }
            
            // Update countdown every second
            updateCountdown();
            setInterval(updateCountdown, 1000);
            
            // Smooth scrolling for anchor links
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function(e) {
                    e.preventDefault();

                    const targetId = this.getAttribute('href');
                    if (targetId === '#') return;

                    const targetElement = document.querySelector(targetId);
                    if (targetElement) {
                        window.scrollTo({
                            top: targetElement.offsetTop,
                            behavior: 'smooth'
                        });
                    }
                });
            });

            // Pram Animation
            const pram = document.getElementById('pram');
            const pramImage = document.getElementById('pramImage');

            function animatePramRight() {
                pramImage.src = './assets/train-right.png';
                pram.style.left = '-200px'; // Start from left edge (off-screen)
                pram.style.bottom = '-80px';
                pram.style.transition = 'left 18s linear';
                setTimeout(() => {
                    pram.style.left = 'calc(100vw + 200px)'; // Move to right edge (off-screen)
                }, 10);
            }

            function animatePramLeft() {
                pramImage.src = './assets/train-left.png';
                pram.style.left = 'calc(100vw + 200px)'; // Start from right edge (off-screen)
                pram.style.bottom = '-80px';
                pram.style.transition = 'left 18s linear';
                setTimeout(() => {
                    pram.style.left = '-200px'; // Move to left edge (off-screen)
                }, 10);
            }

            function startAnimationLoop() {
                // Sequence: train-right -> train-left -> repeat
                animatePramRight();
                setTimeout(() => {
                    animatePramLeft();
                    setTimeout(startAnimationLoop, 10000); // 10 seconds delay before next cycle
                }, 18000); // 8s animation + 10s delay
            }

            // Start the animation loop after 10 seconds initial delay
            setTimeout(startAnimationLoop, 10000);
        });

        // 3D Carousel JavaScript with delayed autoplay
        document.addEventListener('DOMContentLoaded', function() {
            var radius = 300; // how big of the radius
            var autoRotate = true; // auto rotate or not
            var rotateSpeed = -60; // unit: seconds/360 degrees
            var imgWidth = 120; // width of images (unit: px)
            var imgHeight = 170; // height of images (unit: px)

            // Minimum gap between images
            var minGap = 10; // px

            // Variables for auto-rotation control
            var autoRotationStarted = false;
            var rotationStartTimer = null;
            var isInViewport = false;

            // ===================== start =======================
            // animation start after 1000 miliseconds
            setTimeout(init, 1000);

            var odrag = document.getElementById('drag-container');
            var ospin = document.getElementById('spin-container');
            var aImg = ospin.getElementsByTagName('img');
            var aVid = ospin.getElementsByTagName('video');
            var aEle = [...aImg, ...aVid]; // combine 2 arrays

            // Calculate minimum radius to ensure minimum gap
            var minRadius = Math.ceil((imgWidth + minGap) / (2 * Math.sin(Math.PI / aEle.length)));
            radius = Math.max(radius, minRadius);

            // Size of images
            ospin.style.width = imgWidth + "px";
            ospin.style.height = imgHeight + "px";

            // Size of ground - depend on radius
            var ground = document.getElementById('ground');
            ground.style.width = radius * 3 + "px";
            ground.style.height = radius * 3 + "px";

            function init(delayTime) {
                for (var i = 0; i < aEle.length; i++) {
                    aEle[i].style.transform = "rotateY(" + (i * (360 / aEle.length)) + "deg) translateZ(" + radius + "px)";
                    aEle[i].style.transition = "transform 1s";
                    aEle[i].style.transitionDelay = delayTime || (aEle.length - i) / 4 + "s";
                }
                
                // Start checking viewport visibility
                checkViewportVisibility();
                window.addEventListener('scroll', checkViewportVisibility);
            }

            function applyTranform(obj) {
                // Constrain the angle of camera (between 0 and 180)
                if(tY > 180) tY = 180;
                if(tY < 0) tY = 0;

                // Apply the angle
                obj.style.transform = "rotateX(" + (-tY) + "deg) rotateY(" + (tX) + "deg)";
            }

            function playSpin(yes) {
                if (yes) {
                    var animationName = (rotateSpeed > 0 ? 'spin' : 'spinRevert');
                    ospin.style.animation = `${animationName} ${Math.abs(rotateSpeed)}s infinite linear`;
                    ospin.style.animationPlayState = 'running';
                } else {
                    ospin.style.animationPlayState = 'paused';
                }
            }

            var sX, sY, nX, nY, desX = 0,
                desY = 0,
                tX = 0,
                tY = 10;

            // Check if 3D carousel is in viewport
            function checkViewportVisibility() {
                var rect = odrag.getBoundingClientRect();
                var windowHeight = window.innerHeight || document.documentElement.clientHeight;
                
                // Check if at least 50% of the element is visible
                var elementTop = rect.top;
                var elementBottom = rect.bottom;
                var elementHeight = rect.height;
                
                var visibleHeight = Math.min(elementBottom, windowHeight) - Math.max(elementTop, 0);
                var visiblePercentage = (visibleHeight / elementHeight) * 100;
                
                if (visiblePercentage >= 50 && !isInViewport) {
                    isInViewport = true;
                    
                    // Clear any existing timer
                    if (rotationStartTimer) {
                        clearTimeout(rotationStartTimer);
                    }
                    
                    // Start auto-rotation after 2 seconds delay
                    rotationStartTimer = setTimeout(function() {
                        if (!autoRotationStarted && isInViewport) {
                            autoRotationStarted = true;
                            if (autoRotate) {
                                playSpin(true);
                            }
                        }
                    }, 2000); // 2 seconds delay
                    
                } else if (visiblePercentage < 30 && isInViewport) {
                    isInViewport = false;
                    autoRotationStarted = false;
                    playSpin(false);
                    
                    // Clear timer if leaving viewport
                    if (rotationStartTimer) {
                        clearTimeout(rotationStartTimer);
                        rotationStartTimer = null;
                    }
                }
            }

            // setup events
            odrag.onpointerdown = function (e) {
                // Stop auto rotation when user interacts
                if (autoRotationStarted) {
                    playSpin(false);
                }
                
                clearInterval(odrag.timer);
                e = e || window.event;
                var sX = e.clientX,
                    sY = e.clientY;

                this.onpointermove = function (e) {
                    e = e || window.event;
                    var nX = e.clientX,
                        nY = e.clientY;
                    desX = nX - sX;
                    desY = nY - sY;
                    tX += desX * 0.1;
                    tY += desY * 0.1;
                    applyTranform(odrag);
                    sX = nX;
                    sY = nY;
                };

                this.onpointerup = function (e) {
                    odrag.timer = setInterval(function () {
                        desX *= 0.95;
                        desY *= 0.95;
                        tX += desX * 0.1;
                        tY += desY * 0.1;
                        applyTranform(odrag);
                        
                        // Don't restart auto rotation on mobile
                        if (!isMobileDevice()) {
                            if (Math.abs(desX) < 0.5 && Math.abs(desY) < 0.5) {
                                clearInterval(odrag.timer);
                                // Only restart auto rotation if still in viewport
                                if (isInViewport && autoRotationStarted) {
                                    playSpin(true);
                                }
                            }
                        }
                    }, 17);
                    this.onpointermove = this.onpointerup = null;
                };

                return false;
            };

            // Mobile detection
            function isMobileDevice() {
                return (typeof window.orientation !== "undefined") || (navigator.userAgent.indexOf('IEMobile') !== -1);
            }

            // Mouse wheel for zoom
            odrag.onmousewheel = function(e) {
                e = e || window.event;
                var d = e.wheelDelta / 20 || -e.detail;
                radius += d;
                
                // Limit radius for better UX
                radius = Math.max(200, Math.min(400, radius));
                
                init(1);
            };

            // Improved Touch events for mobile
            odrag.addEventListener('touchstart', handleTouchStart, { passive: false });
            odrag.addEventListener('touchmove', handleTouchMove, { passive: false });
            odrag.addEventListener('touchend', handleTouchEnd, { passive: false });

            var xDown = null;
            var yDown = null;

            function handleTouchStart(evt) {
                // Stop auto rotation when user touches
                if (autoRotationStarted) {
                    playSpin(false);
                }
                
                clearInterval(odrag.timer);
                const firstTouch = evt.touches[0];
                xDown = firstTouch.clientX;
                yDown = firstTouch.clientY;
                evt.preventDefault();
            }

            function handleTouchMove(evt) {
                if (!xDown || !yDown) {
                    return;
                }

                evt.preventDefault();
                
                var xUp = evt.touches[0].clientX;
                var yUp = evt.touches[0].clientY;

                var xDiff = xDown - xUp;
                var yDiff = yDown - yUp;

                desX = xDiff;
                desY = yDiff;
                tX += desX * 0.1;
                tY += desY * 0.1;
                applyTranform(odrag);

                xDown = xUp;
                yDown = yUp;
            }

            function handleTouchEnd(evt) {
                odrag.timer = setInterval(function () {
                    desX *= 0.95;
                    desY *= 0.95;
                    tX += desX * 0.1;
                    tY += desY * 0.1;
                    applyTranform(odrag);
                    
                    if (Math.abs(desX) < 0.5 && Math.abs(desY) < 0.5) {
                        clearInterval(odrag.timer);
                        // Don't restart auto rotation on mobile touch end
                    }
                }, 17);
                xDown = null;
                yDown = null;
            }

            // Pinch zoom for mobile
            var initialDistance = null;

            odrag.addEventListener('touchstart', function(e) {
                if (e.touches.length === 2) {
                    initialDistance = Math.hypot(
                        e.touches[0].clientX - e.touches[1].clientX,
                        e.touches[0].clientY - e.touches[1].clientY
                    );
                }
            }, false);

            odrag.addEventListener('touchmove', function(e) {
                if (e.touches.length === 2 && initialDistance !== null) {
                    e.preventDefault();
                    var currentDistance = Math.hypot(
                        e.touches[0].clientX - e.touches[1].clientX,
                        e.touches[0].clientY - e.touches[1].clientY
                    );
                    
                    var scale = currentDistance / initialDistance;
                    radius = radius * scale;
                    
                    // Limit radius for better UX
                    radius = Math.max(200, Math.min(400, radius));
                    
                    init(1);
                    initialDistance = currentDistance;
                }
            }, false);

            odrag.addEventListener('touchend', function() {
                initialDistance = null;
            }, false);
            
            // Add click event to stop auto rotation when clicking on images
            aEle.forEach(function(element) {
                element.addEventListener('click', function() {
                    if (autoRotationStarted) {
                        playSpin(false);
                        autoRotationStarted = false;
                    }
                });
            });
        });

        // PWA Manifest creation and Service Worker Registration
        document.addEventListener('DOMContentLoaded', function() {
            // Create manifest dynamically
            const manifest = {
                "name": "Baby's First Birthday",
                "short_name": "BabyBirthday",
                "description": "Ethan's First Birthday Celebration Invitation",
                "start_url": "./",
                "display": "standalone",
                "background_color": "#0a0a0a",
                "theme_color": "#00bfff",
                "orientation": "portrait",
                "icons": [
                    {
                        "src": "./assets/logo.png",
                        "sizes": "192x192",
                        "type": "image/png",
                        "purpose": "any maskable"
                    },
                    {
                        "src": "./assets/logo.png",
                        "sizes": "512x512",
                        "type": "image/png",
                        "purpose": "any maskable"
                    }
                ],
                "categories": ["lifestyle", "events"],
                "prefer_related_applications": false
            };

            // Create manifest blob and set href
            const manifestElement = document.querySelector('link[rel="manifest"]');
            if (manifestElement) {
                const blob = new Blob([JSON.stringify(manifest, null, 2)], {type: 'application/json'});
                const url = URL.createObjectURL(blob);
                manifestElement.href = url;
            }

            // Register Service Worker
            if ('serviceWorker' in navigator) {
                window.addEventListener('load', () => {
                    // Create service worker inline content
                    const swContent = `
                        const CACHE_NAME = 'baby-first-birthday-v1';
                        const urlsToCache = [
                            './',
                            './index.html',
                            './assets/logo.png',
                            './assets/img1.png',
                            './assets/img1.png',
                            './assets/img4.jpg',
                            './assets/event1.png',
                            './assets/frame.png',
                            './assets/pearl.png',
                            './assets/train-left.png',
                            './assets/train-right.png',
                            './assets/pure-love-304010.mp3',
                            './assets/carousel-image1.png',
                            './assets/carousel-image2.png',
                            './assets/carousel-image3.png',
                            './assets/carousel-image4.png',
                            './assets/carousel-image5.png',
                            './assets/event1.png',
                            './assets/event2.png',
                            './assets/event3.png',
                            './assets/map-icon.png',
                            './assets/sky.png',
                            './assets/fairy.png',
                            'https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css',
                            'https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&family=Great+Vibes&family=Playfair+Display:wght@400;500;700&family=Cinzel:wght@400;700&family=Alex+Brush&family=Montserrat:wght@300;400;500&display=swap',
                            'https://unpkg.com/aos@2.3.1/dist/aos.css',
                            'https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css',
                            'https://unpkg.com/aos@2.3.1/dist/aos.js'
                        ];

                        self.addEventListener('install', event => {
                            event.waitUntil(
                                caches.open(CACHE_NAME)
                                    .then(cache => {
                                        return cache.addAll(urlsToCache);
                                    })
                            );
                        });

                        self.addEventListener('fetch', event => {
                            event.respondWith(
                                caches.match(event.request)
                                    .then(response => {
                                        if (response) {
                                            return response;
                                        }
                                        return fetch(event.request);
                                    })
                            );
                        });

                        self.addEventListener('activate', event => {
                            const cacheWhitelist = [CACHE_NAME];
                            event.waitUntil(
                                caches.keys().then(cacheNames => {
                                    return Promise.all(
                                        cacheNames.map(cacheName => {
                                            if (cacheWhitelist.indexOf(cacheName) === -1) {
                                                return caches.delete(cacheName);
                                            }
                                        })
                                    );
                                })
                            );
                        });
                    `;

                    // Create service worker blob and register it
                    const blob = new Blob([swContent], {type: 'application/javascript'});
                    const swBlobUrl = URL.createObjectURL(blob);

                    navigator.serviceWorker.register(swBlobUrl)
                        .then(registration => {
                            console.log('Service Worker registered with scope:', registration.scope);
                        })
                        .catch(error => {
                            console.log('Service Worker registration failed:', error);
                        });
                });
            }
        });

        // PWA Installation Logic
        let deferredPrompt;

        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            
            // Optionally, you can show a custom install button here
            // or store the event for later use
        });

        // Install dialog functionality
        document.addEventListener('DOMContentLoaded', function() {
            const pwaDialog = document.getElementById('pwaDialog');
            const installButton = document.getElementById('installButton');
            const cancelButton = document.getElementById('cancelButton');
            const installLogo = document.getElementById('installLogo');
            let clickCount = 0;
            let clickTimer;

            // Double click on logo to show install dialog
            if (installLogo) {
                installLogo.addEventListener('click', function() {
                    clickCount++;

                    if (clickCount === 1) {
                        clickTimer = setTimeout(() => {
                            clickCount = 0;
                        }, 300);
                    } else if (clickCount === 2) {
                        clearTimeout(clickTimer);
                        showInstallDialog();
                        clickCount = 0;
                    }
                });
            }

            // Show install dialog
            function showInstallDialog() {
                pwaDialog.style.display = 'flex';
                document.body.style.overflow = 'hidden';
            }

            // Hide install dialog
            function hideInstallDialog() {
                pwaDialog.style.display = 'none';
                document.body.style.overflow = 'auto';
            }

            // Install button click
            installButton.addEventListener('click', async () => {
                hideInstallDialog();

                if (deferredPrompt) {
                    deferredPrompt.prompt();
                    const { outcome } = await deferredPrompt.userChoice;

                    if (outcome === 'accepted') {
                        console.log('User accepted the install prompt');

                        // Show success message
                        alert('Baby\'s First Birthday app is being installed on your device!');
                    }
                    deferredPrompt = null;
                } else {
                    // Fallback for browsers that don't support beforeinstallprompt
                    alert('To install this app, look for the "Add to Home Screen" option in your browser menu.');
                }
            });

            // Cancel button click
            cancelButton.addEventListener('click', hideInstallDialog);

            // Close dialog when clicking outside
            pwaDialog.addEventListener('click', (e) => {
                if (e.target === pwaDialog) {
                    hideInstallDialog();
                }
            });
        });
    </script>
</body>
</html>